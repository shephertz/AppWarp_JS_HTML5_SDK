var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomIds=function(){var e=this.json.ids,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},e}();e.AllRoomsEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getUsernames=function(){var e=this.json.names,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},e}();e.AllUsersEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){"undefined"==typeof e&&(e=""),this.json={},""!=e&&(this.json=JSON.parse(e))}return e.prototype.getChat=function(){return this.json.chat},e.prototype.getSender=function(){return this.json.sender},e.prototype.getLocId=function(){return this.json.id},e.prototype.getIsLocationLobby=function(){return this.json.isLobby?!0:!1},e}();e.Chat=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.Auth=1]="Auth",e[e.JoinLobby=2]="JoinLobby",e[e.SubscribeLobby=3]="SubscribeLobby",e[e.UnsubscribeLobby=4]="UnsubscribeLobby",e[e.LeaveLobby=5]="LeaveLobby",e[e.CreateRoom=6]="CreateRoom",e[e.JoinRoom=7]="JoinRoom",e[e.SubscribeRoom=8]="SubscribeRoom",e[e.UnsubscribeRoom=9]="UnsubscribeRoom",e[e.LeaveRoom=10]="LeaveRoom",e[e.DeleteRoom=11]="DeleteRoom",e[e.Chat=12]="Chat",e[e.UpdatePeers=13]="UpdatePeers",e[e.Signout=14]="Signout",e[e.CreateZone=15]="CreateZone",e[e.DeleteZone=16]="DeleteZone",e[e.GetRooms=17]="GetRooms",e[e.GetUsers=18]="GetUsers",e[e.GetUserInfo=19]="GetUserInfo",e[e.GetRoomInfo=20]="GetRoomInfo",e[e.SetCustomRoomData=21]="SetCustomRoomData",e[e.SetCustomUserData=22]="SetCustomUserData",e[e.GetLobbyInfo=23]="GetLobbyInfo",e[e.JoinRoomWithNUser=24]="JoinRoomWithNUser",e[e.UpdateRoomProperty=25]="UpdateRoomProperty",e[e.JoinRoomWithProperties=27]="JoinRoomWithProperties",e[e.GetRoomWithNUser=28]="GetRoomWithNUser",e[e.GetRoomWithProperties=29]="GetRoomWithProperties",e[e.JoinRoomInRange=37]="JoinRoomInRange",e[e.GetRoomInRange=38]="GetRoomInRange",e[e.LockProperties=35]="LockProperties",e[e.UnlockProperties=36]="UnlockProperties",e[e.KeepAlive=63]="KeepAlive",e[e.AssocPort=64]="AssocPort",e[e.AssocPortAck=65]="AssocPortAck",e[e.PrivateChat=30]="PrivateChat",e[e.Move=31]="Move",e[e.PrivateUpdate=32]="PrivateUpdate",e[e.StartGame=66]="StartGame",e[e.StopGame=67]="StopGame",e[e.GetMoveHistory=68]="GetMoveHistory",e[e.SetNextTurn=69]="SetNextTurn",e[e.GetAllRoomsCount=70]="GetAllRoomsCount",e[e.GetOnlineUsersCount=71]="GetOnlineUsersCount",e[e.BroadcastChat=72]="BroadcastChat",e[e.GetRoomInRangeWithProp=73]="GetRoomInRangeWithProp",e[e.GetUserStatus=74]="GetUserStatus",e[e.JoinAndSubcribeRoom=75]="JoinAndSubcribeRoom",e[e.LeaveAndUnsucribeRoom=76]="LeaveAndUnsucribeRoom"}(e.RequestType||(e.RequestType={}));e.RequestType;!function(e){e[e.FlatString=0]="FlatString",e[e.Binary=1]="Binary",e[e.Json=2]="Json"}(e.PayloadType||(e.PayloadType={}));e.PayloadType;!function(e){e[e.Request=0]="Request",e[e.Response=1]="Response",e[e.Update=2]="Update"}(e.MessageType||(e.MessageType={}));e.MessageType;!function(e){e[e.Success=0]="Success",e[e.AuthError=1]="AuthError",e[e.ResourceNotFound=2]="ResourceNotFound",e[e.ResourceMoved=3]="ResourceMoved",e[e.BadRequest=4]="BadRequest",e[e.ConnectionError=5]="ConnectionError",e[e.UnknownError=6]="UnknownError",e[e.ResultSizeError=7]="ResultSizeError",e[e.SuccessRecovered=8]="SuccessRecovered",e[e.ConnectionErrorRecoverable=9]="ConnectionErrorRecoverable",e[e.UserPausedError=10]="UserPausedError",e[e.AutoRecovering=11]="AutoRecovering"}(e.ResultCode||(e.ResultCode={}));e.ResultCode;!function(e){e[e.WaitingForPausedUser=21]="WaitingForPausedUser",e[e.InvalidAPIKey=22]="InvalidAPIKey"}(e.ReasonCode||(e.ReasonCode={}));e.ReasonCode;!function(e){e[e.RoomCreated=1]="RoomCreated",e[e.RoomDeleted=2]="RoomDeleted",e[e.UserJoinedLobby=3]="UserJoinedLobby",e[e.UserLeftLobby=4]="UserLeftLobby",e[e.UserJoinedRoom=5]="UserJoinedRoom",e[e.UserLeftRoom=6]="UserLeftRoom",e[e.UserOnline=7]="UserOnline",e[e.UserOffline=8]="UserOffline",e[e.Chat=9]="Chat",e[e.UpdatePeers=10]="UpdatePeers",e[e.RoomPropertyChange=11]="RoomPropertyChange",e[e.PrivateChat=12]="PrivateChat",e[e.MoveCompleted=13]="MoveCompleted",e[e.UserPaused=14]="UserPaused",e[e.UserResumed=15]="UserResumed",e[e.GameStarted=16]="GameStarted",e[e.GameStopped=17]="GameStopped",e[e.PrivateUpdate=18]="PrivateUpdate",e[e.NextTurnRequested=19]="NextTurnRequested"}(e.UpdateType||(e.UpdateType={}));e.UpdateType;!function(e){e[e.MaxPropertySizeBytes=2048]="MaxPropertySizeBytes"}(e.Constants||(e.Constants={}));e.Constants;!function(e){e[e.Connected=0]="Connected",e[e.Connecting=1]="Connecting",e[e.Disconnected=2]="Disconnected",e[e.Disconnecting=3]="Disconnecting",e[e.Recovering=4]="Recovering"}(e.ConnectionState||(e.ConnectionState={}));e.ConnectionState}(AppWarp||(AppWarp={}));var AppWarp;!function(e){!function(e){e[e.onConnectDone=0]="onConnectDone",e[e.onDisconnectDone=1]="onDisconnectDone",e[e.onJoinLobbyDone=2]="onJoinLobbyDone",e[e.onLeaveLobbyDone=3]="onLeaveLobbyDone",e[e.onSubscribeLobbyDone=4]="onSubscribeLobbyDone",e[e.onUnsubscribeLobbyDone=5]="onUnsubscribeLobbyDone",e[e.onGetLiveLobbyInfoDone=6]="onGetLiveLobbyInfoDone",e[e.onSubscribeRoomDone=7]="onSubscribeRoomDone",e[e.onUnsubscribeRoomDone=8]="onUnsubscribeRoomDone",e[e.onJoinRoomDone=9]="onJoinRoomDone",e[e.onLeaveRoomDone=10]="onLeaveRoomDone",e[e.onGetLiveRoomInfoDone=11]="onGetLiveRoomInfoDone",e[e.onSetCustomRoomDataDone=12]="onSetCustomRoomDataDone",e[e.onUpdatePropertyDone=13]="onUpdatePropertyDone",e[e.onLockPropertiesDone=14]="onLockPropertiesDone",e[e.onUnlockPropertiesDone=15]="onUnlockPropertiesDone",e[e.onCreateRoomDone=16]="onCreateRoomDone",e[e.onDeleteRoomDone=17]="onDeleteRoomDone",e[e.onGetAllRoomsDone=18]="onGetAllRoomsDone",e[e.onGetOnlineUsersDone=19]="onGetOnlineUsersDone",e[e.onGetLiveUserInfoDone=20]="onGetLiveUserInfoDone",e[e.onSetCustomUserDataDone=21]="onSetCustomUserDataDone",e[e.onGetMatchedRoomsDone=22]="onGetMatchedRoomsDone",e[e.onGetAllRoomsCountDone=23]="onGetAllRoomsCountDone",e[e.onGetOnlineUsersCountDone=24]="onGetOnlineUsersCountDone",e[e.onRoomCreated=25]="onRoomCreated",e[e.onRoomDestroyed=26]="onRoomDestroyed",e[e.onUserLeftRoom=27]="onUserLeftRoom",e[e.onUserJoinedRoom=28]="onUserJoinedRoom",e[e.onUserLeftLobby=29]="onUserLeftLobby",e[e.onUserJoinedLobby=30]="onUserJoinedLobby",e[e.onChatReceived=31]="onChatReceived",e[e.onUpdatePeersReceived=32]="onUpdatePeersReceived",e[e.onUserChangeRoomProperty=33]="onUserChangeRoomProperty",e[e.onPrivateChatReceived=34]="onPrivateChatReceived",e[e.onPrivateUpdateReceived=35]="onPrivateUpdateReceived",e[e.onMoveCompleted=36]="onMoveCompleted",e[e.onGameStarted=37]="onGameStarted",e[e.onGameStopped=38]="onGameStopped",e[e.onUserPaused=39]="onUserPaused",e[e.onUserResumed=40]="onUserResumed",e[e.onSendChatDone=41]="onSendChatDone",e[e.onSendPrivateChatDone=42]="onSendPrivateChatDone",e[e.onSendUpdateDone=43]="onSendUpdateDone",e[e.onSendPrivateUpdateDone=44]="onSendPrivateUpdateDone",e[e.onSendMoveDone=45]="onSendMoveDone",e[e.onStartGameDone=46]="onStartGameDone",e[e.onStopGameDone=47]="onStopGameDone",e[e.onGetMoveHistoryDone=48]="onGetMoveHistoryDone",e[e.onSetNextTurnDone=49]="onSetNextTurnDone",e[e.onNextTurnRequested=50]="onNextTurnRequested",e[e.onUserStatusDone=51]="onUserStatusDone",e[e.onJoinAndSubscribeRoomDone=52]="onJoinAndSubscribeRoomDone",e[e.onLeaveAndUnsubscribeRoomDone=53]="onLeaveAndUnsubscribeRoomDone"}(e.Events||(e.Events={}));e.Events}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return t.prototype.getResult=function(){return this.res},t.prototype.getRoom=function(){return new e.Room(this.res,JSON.stringify(this.json))},t.prototype.getCustomData=function(){return this.json.data},t.prototype.getProperties=function(){return this.json.properties},t.prototype.getUsers=function(){var e=this.json.usernames,t=[];return e&&(t=e.split(";"),t.length>0&&t.pop()),t},t}();e.LiveRoom=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getName=function(){return this.json.name},e.prototype.getLocationId=function(){return this.json.locationId},e.prototype.getCustomData=function(){return this.json.custom},e.prototype.isLobby=function(){return this.json.isLobby?this.json.isLobby:!1},e.prototype.isPaused=function(){return this.json.isPaused?this.json.isPaused:!1},e}();e.LiveUser=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getLobbyId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getIsPrimary=function(){return this.json.isPrimary},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Lobby=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRooms=function(){var e=[],t=0;for(var n in this.json){var o={};o.id=n,o.name=this.json[n].name,o.owner=this.json[n].owner,o.maxUsers=this.json[n].maxUsers,o.isAdmin=this.json[n].isAdmin,e[t]=o,t++}return e},e}();e.MatchedRoomEvent=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e){this.json={},""!=e&&(this.json=JSON.parse(e))}return e.prototype.getSender=function(){return this.json.sender},e.prototype.getNextTurn=function(){return this.json.nextTurn},e.prototype.getMoveData=function(){return this.json.moveData},e.prototype.getRoomId=function(){this.json.roomId},e}();e.Move=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,n){this.messageType=t[n+0],this.updateType=t[n+1],this.reserved=t[n+2],this.payLoadType=t[n+3],this.payLoadSize=e.Utility.bytesToIntger(t,n+4),this.payLoad=new Uint8Array(this.payLoadSize);for(var o=0;o<this.payLoadSize;o++)this.payLoad[o]=t[8+n+o]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getUpdateType=function(){return this.updateType},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("=========Notify========="),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("updateType  : "+e.UpdateType[this.getUpdateType()]),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Notify=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){}return t.buildWarpRequest=function(t,n,o,s){var i=new Uint8Array(16+o.length);i[0]=e.MessageType.Request,i[1]=n,i[2]=t>>>24,i[3]=t>>>16,i[4]=t>>>8,i[5]=t;for(var r=6;9>=r;r++)i[r]=0;i[10]=0,i[11]=e.PayloadType.Binary,o.length>0&&n!=e.RequestType.UpdatePeers&&n!=e.RequestType.PrivateUpdate&&(i[11]=e.PayloadType.Json);var a=o.length;if(i[12]=a>>>24,i[13]=a>>>16,i[14]=a>>>8,i[15]=a,0==s)for(var r=0;a>r;++r)i[16+r]=o[r];else for(var r=0;a>r;++r)i[16+r]=o.charCodeAt(r);return i},t.buildAuthRequest=function(t,n,o,s){var i=e.Utility.getODataUTCDateFilter(),r="";r+="apiKey"+n,r+="timeStamp"+i,r+="user"+s,r+="versionJS_1.12";var a=e.CryptoJS.HmacSHA1(r,o).toString(),u=encodeURIComponent(e.Utility.base64_encode(e.Utility.hex2bin(a))),p={};return p.apiKey=n,p.version="JS_1.12",p.timeStamp=i,p.user=s,p.signature=u,p.keepalive=6,p.recoverytime=t,JSON.stringify(p)},t.buildLobbyRequest=function(){var e={};return e.isPrimary=!0,JSON.stringify(e)},t.buildChatRequest=function(e){if(e.length>=512)return"";var t={};return t.chat=e,JSON.stringify(t)},t.buildPrivateChatRequest=function(e,t){if(t.length>=512)return"";var n={};return n.to=e,n.chat=t,JSON.stringify(n)},t.buildPrivateUpdateRequest=function(e,t){var n=new Uint8Array(e.length+t.length+1),o=e.length;n[0]=o;for(var s=0;o>s;++s)n[1+s]=e.charCodeAt(s);for(var i=0;i<t.length;++i)n[1+o+i]=t[i];return n},t.buildRoomRequest=function(e){var t={};return t.id=e,JSON.stringify(t)},t.buildUserRequest=function(e){var t={};return t.name=e,JSON.stringify(t)},t.buildRoomInRangeRequest=function(e,t,n){var o={};return o.minUsers=e,o.maxUsers=t,o.maxPreferred=n,JSON.stringify(o)},t.buildRoomWithPropertiesRequest=function(e){var t={};return t.properties=e,JSON.stringify(t)},t.buildRoomInRangeWithPropRequest=function(e,t,n,o){var s={};return s.minUsers=e,s.maxUsers=t,s.maxPreferred=n,s.properties=o,JSON.stringify(s)},t.buildSetCustomRoomDataRequest=function(e,t){var n={};return n.id=e,n.data=t,JSON.stringify(n)},t.buildSetCustomUserDataRequest=function(e,t){var n={};return n.name=e,n.data=t,JSON.stringify(n)},t.buildUpdateRoomPropertiesRequest=function(e,t,n){"undefined"==typeof n&&(n=null);var o="";if(null!=n&&n.length>0)for(var s=0;s<n.length;++s)o+=s<n.length-1?n[s]+";":n[s];var i={};return i.id=e,i.addOrUpdate=t,i.remove=o,JSON.stringify(i)},t.buildLockPropertiesRequest=function(e){var t={};return t.lockProperties=e,JSON.stringify(t)},t.buildUnlockPropertiesRequest=function(e){var t="";if(e&&e.length>0)for(var n=0;n<e.length;++n)t+=n<e.length-1?e[n]+";":e[n];var o={};return o.unlockProperties=t,JSON.stringify(o)},t.buildCreateTurnRoomRequest=function(e,t,n,o,s){"undefined"==typeof o&&(o=null),"undefined"==typeof s&&(s=-1);var i={};return i.name=e,i.owner=t,i.maxUsers=n,null!=o&&(i.properties=o),s>=0&&(i.turnTime=s,i.inox=!0),JSON.stringify(i)},t.buildStartGameRequest=function(e,t){var n={};return n.isDefaultLogic=e,n.nextTurn=t,JSON.stringify(n)},t.buildSetNextTurnRequest=function(e){var t={};return t.nextTurn=e,JSON.stringify(t)},t.buildSendMoveRequest=function(e,t){var n={};return n.moveData=e,n.nextTurn=t,JSON.stringify(n)},t.buildGetMoveHistoryRequest=function(){var e={};return e.count=5,JSON.stringify(e)},t.buildBroadcastChatRequest=function(e,t){var n={};return n.id=e,n.chat=t,JSON.stringify(n)},t}();e.RequestBuilder=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(t,n){this.messageType=t[n+0],this.requestType=t[n+1],this.resultCode=t[n+2],this.reserved=t[n+3],this.payLoadType=t[n+4],this.payLoadSize=e.Utility.bytesToIntger(t,n+5),this.payLoad=new Uint8Array(this.payLoadSize);for(var o=0;o<this.payLoadSize;o++)this.payLoad[o]=t[9+n+o]}return t.prototype.getMessageType=function(){return this.messageType},t.prototype.getRequestType=function(){return this.requestType},t.prototype.getResultCode=function(){return this.resultCode},t.prototype.getPayloadType=function(){return this.payLoadType},t.prototype.getPayloadSize=function(){return this.payLoadSize},t.prototype.getPayload=function(){return this.payLoad},t.prototype.getPayloadString=function(){return e.Utility.bin2String(this.payLoad)},t.prototype.debug=function(){console.log("========Response========"),console.log("messageType : "+e.MessageType[this.getMessageType()]),console.log("requestType : "+e.RequestType[this.getRequestType()]),console.log("resultCode  : "+e.ResultCode[this.getResultCode()]),console.log("payLoadType : "+e.PayloadType[this.getPayloadType()]),console.log("payLoadSize : "+this.getPayloadSize()),console.log("payLoad     : "+this.getPayloadString())},t}();e.Response=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(e,t){"undefined"==typeof t&&(t=""),this.json={},""!=t&&(this.json=JSON.parse(t)),this.res=e}return e.prototype.getResult=function(){return this.res},e.prototype.getRoomId=function(){return this.json.id},e.prototype.getOwner=function(){return this.json.owner},e.prototype.getName=function(){return this.json.name},e.prototype.getMaxUsers=function(){return this.json.maxUsers},e}();e.Room=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function e(){}return e.getODataUTCDateFilter=function(){var e,t=new Date,n=(t.getUTCMonth()+1).toString();e=1==n.length?"0"+n:n;var o,s=t.getUTCDate().toString();o=1==s.length?"0"+s:s;var i="";return i+=t.getUTCFullYear()+"-",i+=e+"-",i+=o,i+="T"+t.getUTCHours()+":",i+=t.getUTCMinutes()+":",i+=t.getUTCSeconds()+".",i+=t.getUTCMilliseconds(),i+="Z"},e.hex2bin=function(e){for(var t=[],n=0;n<e.length-1;n+=2)t.push(parseInt(e.substr(n,2),16));return String.fromCharCode.apply(String,t)},e.base64_encode=function(e){var t,n,o,s,i,r,a,u,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,c=0,d="",R=[];if(!e)return e;do t=e.charCodeAt(l++),n=e.charCodeAt(l++),o=e.charCodeAt(l++),u=t<<16|n<<8|o,s=u>>18&63,i=u>>12&63,r=u>>6&63,a=63&u,R[c++]=p.charAt(s)+p.charAt(i)+p.charAt(r)+p.charAt(a);while(l<e.length);d=R.join("");var h=e.length%3;return(h?d.slice(0,h-3):d)+"===".slice(h||3)},e.bin2String=function(e){for(var t="",n=0;n<e.length;n++){var o=e[n];t+=String.fromCharCode(o)}return t},e.bytesToIntger=function(e,t){for(var n=0,o=0;4>o;o++)n=(n<<8)+(255&e[t+o]);return n},e}();e.Utility=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=function(){function t(){if(this.LOOKUP_ADDRESS="control.appwarp.shephertz.com/lookup",this.LOOKUP_ADDRESS_DNS="control.appwarp.shephertz.com/lookup_dns",this.responseCallbacks=[],this.updateCallbacks=[],this.SessionID=0,this.lastSendTime=0,this.userName="",this.keepAliveInterval=2e3,this.pendingKeepAliveIntervalsLimit=3,this.countPendingKeepAlives=0,this.connectionState=e.ConnectionState.Disconnected,this.enableLogs=!1,this.useSSL=!1,this.autoRecover=!1,t.instance)throw new Error("Error: Instantiation failed: Use WarpClient.getInstance() instead of new.");t.instance=this,setInterval(function(){if(this.AppWarp.WarpClient.instance.connectionState==e.ConnectionState.Connected){var t=(new Date).getTime(),n=t-this.AppWarp.WarpClient.instance.lastSendTime;if(n>this.AppWarp.WarpClient.instance.keepAliveInterval)if(this.AppWarp.WarpClient.instance.countPendingKeepAlives>=this.AppWarp.WarpClient.instance.pendingKeepAliveIntervalsLimit)this.AppWarp.WarpClient.instance.connectionState=e.ConnectionState.Disconnected,this.AppWarp.WarpClient.recoveryAllowance>0&&0!=this.AppWarp.WarpClient.instance.SessionID?1==this.AppWarp.WarpClient.instance.autoRecover?(this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.AutoRecovering,0),this.AppWarp.WarpClient.instance.recoverConnection()):this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.ConnectionErrorRecoverable,0):(this.AppWarp.WarpClient.instance.SessionID=0,this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone]&&this.AppWarp.WarpClient.instance.responseCallbacks[this.AppWarp.Events.onConnectDone](this.AppWarp.ResultCode.ConnectionError,0)),this.AppWarp.WarpClient.instance.socket.onopen=function(){},this.AppWarp.WarpClient.instance.socket.onclose=function(){},this.AppWarp.WarpClient.instance.socket.onmessage=function(){},delete this.AppWarp.WarpClient.instance.socket;else{var o=this.AppWarp.RequestBuilder.buildWarpRequest(this.AppWarp.WarpClient.instance.SessionID,e.RequestType.KeepAlive,"",!0);this.AppWarp.WarpClient.instance.sendMessage(o.buffer),this.AppWarp.WarpClient.instance.countPendingKeepAlives++}}},500)}return t.initialize=function(e,n,o){"undefined"==typeof o&&(o=""),t.apiKey=e,t.secretKey=n,t.serverAddress=o},t.terminate=function(){null!=t.instance&&(t.instance.getConnectionState()!=e.ConnectionState.Disconnected&&t.instance.disconnect(),delete t.instance)},t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.sendMessage=function(e){this.socket.send(e),this.lastSendTime=(new Date).getTime()},t.prototype.onMessage=function(t){for(var n=new Uint8Array(t.data),o=n.length,s=0;o>s;)if(n[s]==e.MessageType.Response){var i=new e.Response(n,s);s+=this.handleResponse(i)}else if(n[s]==e.MessageType.Update){var r=new e.Notify(n,s);s+=this.handleNotify(r)}},t.prototype.handleResponse=function(n){if(1==this.enableLogs&&n.getRequestType()!=e.RequestType.KeepAlive&&n.debug(),n.getRequestType()==e.RequestType.Auth){var o=n.getResultCode(),s=0;if(n.getResultCode()==e.ResultCode.Success){var i=JSON.parse(n.getPayloadString());this.SessionID=i.sessionid,i.hasOwnProperty("autoRecover")&&(this.autoRecover=i.autoRecover),i.hasOwnProperty("recoveryTime")&&(t.recoveryAllowance=i.recoveryTime),this.connectionState==e.ConnectionState.Recovering&&(o=e.ResultCode.SuccessRecovered),this.connectionState=e.ConnectionState.Connected}else{if(n.getPayloadType()==e.PayloadType.Json){var i=JSON.parse(n.getPayloadString());s=i.reasonCode}this.SessionID=0,this.socket.onclose=function(){},this.socket.close(),this.connectionState=e.ConnectionState.Disconnected}this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](o,s)}else if(n.getRequestType()==e.RequestType.JoinLobby){var r=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinLobbyDone]&&this.responseCallbacks[e.Events.onJoinLobbyDone](r)}else if(n.getRequestType()==e.RequestType.SubscribeLobby){var r=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSubscribeLobbyDone]&&this.responseCallbacks[e.Events.onSubscribeLobbyDone](r)}else if(n.getRequestType()==e.RequestType.UnsubscribeLobby){var r=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeLobbyDone]&&this.responseCallbacks[e.Events.onUnsubscribeLobbyDone](r)}else if(n.getRequestType()==e.RequestType.LeaveLobby){var r=new e.Lobby(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveLobbyDone]&&this.responseCallbacks[e.Events.onLeaveLobbyDone](r)}else if(n.getRequestType()==e.RequestType.Chat)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.JoinRoom||n.getRequestType()==e.RequestType.JoinRoomInRange||n.getRequestType()==e.RequestType.JoinRoomWithProperties){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](a)}else if(n.getRequestType()==e.RequestType.SubscribeRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSubscribeRoomDone]&&this.responseCallbacks[e.Events.onSubscribeRoomDone](a)}else if(n.getRequestType()==e.RequestType.UnsubscribeRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onUnsubscribeRoomDone](a)}else if(n.getRequestType()==e.RequestType.JoinAndSubcribeRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone]&&this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone](a)}else if(n.getRequestType()==e.RequestType.LeaveAndUnsucribeRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone](a)}else if(n.getRequestType()==e.RequestType.LeaveRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onLeaveRoomDone]&&this.responseCallbacks[e.Events.onLeaveRoomDone](a)}else if(n.getRequestType()==e.RequestType.CreateRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](a)}else if(n.getRequestType()==e.RequestType.DeleteRoom){var a=new e.Room(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onDeleteRoomDone]&&this.responseCallbacks[e.Events.onDeleteRoomDone](a)}else if(n.getRequestType()==e.RequestType.GetRoomInfo){var u=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveRoomInfoDone]&&this.responseCallbacks[e.Events.onGetLiveRoomInfoDone](u)}else if(n.getRequestType()==e.RequestType.GetLobbyInfo){var u=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone]&&this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone](u)}else if(n.getRequestType()==e.RequestType.GetUserInfo){var p=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetLiveUserInfoDone]&&this.responseCallbacks[e.Events.onGetLiveUserInfoDone](p)}else if(n.getRequestType()==e.RequestType.GetUserStatus){var p=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUserStatusDone]&&this.responseCallbacks[e.Events.onUserStatusDone](p)}else if(n.getRequestType()==e.RequestType.SetCustomUserData){var p=new e.LiveUser(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSetCustomUserDataDone]&&this.responseCallbacks[e.Events.onSetCustomUserDataDone](p)}else if(n.getRequestType()==e.RequestType.SetCustomRoomData){var u=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onSetCustomRoomDataDone]&&this.responseCallbacks[e.Events.onSetCustomRoomDataDone](u)}else if(n.getRequestType()==e.RequestType.GetUsers){var l=new e.AllUsersEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetOnlineUsersDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersDone](l)}else if(n.getRequestType()==e.RequestType.GetRooms){var c=new e.AllRoomsEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetAllRoomsDone]&&this.responseCallbacks[e.Events.onGetAllRoomsDone](c)}else if(n.getRequestType()==e.RequestType.GetRoomInRange||n.getRequestType()==e.RequestType.GetRoomWithProperties||n.getRequestType()==e.RequestType.GetRoomInRangeWithProp){var d=new e.MatchedRoomEvent(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](d)}else if(n.getRequestType()==e.RequestType.UpdatePeers)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.PrivateChat)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.UpdateRoomProperty){var u=new e.LiveRoom(n.getResultCode(),n.getPayloadString());this.responseCallbacks[e.Events.onUpdatePropertyDone]&&this.responseCallbacks[e.Events.onUpdatePropertyDone](u)}else if(n.getRequestType()==e.RequestType.LockProperties)this.responseCallbacks[e.Events.onLockPropertiesDone]&&this.responseCallbacks[e.Events.onLockPropertiesDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.UnlockProperties)this.responseCallbacks[e.Events.onUnlockPropertiesDone]&&this.responseCallbacks[e.Events.onUnlockPropertiesDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.Move)this.responseCallbacks[e.Events.onSendMoveDone]&&this.responseCallbacks[e.Events.onSendMoveDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.StartGame)this.responseCallbacks[e.Events.onStartGameDone]&&this.responseCallbacks[e.Events.onStartGameDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.StopGame)this.responseCallbacks[e.Events.onStopGameDone]&&this.responseCallbacks[e.Events.onStopGameDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.GetMoveHistory){if(this.responseCallbacks[e.Events.onGetMoveHistoryDone]){for(var R=JSON.parse(n.getPayloadString()),h=[],v=0;v<R.history.length;++v)h[v]=new e.Move(JSON.stringify(R.history[v]));this.responseCallbacks[e.Events.onGetMoveHistoryDone](n.getResultCode(),h)}}else if(n.getRequestType()==e.RequestType.SetNextTurn)this.responseCallbacks[e.Events.onSetNextTurnDone]&&this.responseCallbacks[e.Events.onSetNextTurnDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.PrivateUpdate)this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](n.getResultCode());else if(n.getRequestType()==e.RequestType.KeepAlive)this.countPendingKeepAlives=0;else if(n.getRequestType()==e.RequestType.GetAllRoomsCount){if(this.responseCallbacks[e.Events.onGetAllRoomsCountDone]){var i=JSON.parse(n.getPayloadString());this.responseCallbacks[e.Events.onGetAllRoomsCountDone](n.getResultCode(),i.count)}}else if(n.getRequestType()==e.RequestType.GetOnlineUsersCount){if(this.responseCallbacks[e.Events.onGetOnlineUsersCountDone]){var i=JSON.parse(n.getPayloadString());this.responseCallbacks[e.Events.onGetOnlineUsersCountDone](n.getResultCode(),i.count)}}else n.getRequestType()==e.RequestType.BroadcastChat&&this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](n.getResultCode());return 9+n.getPayloadSize()},t.prototype.handleNotify=function(t){if(1==this.enableLogs&&t.debug(),t.getUpdateType()==e.UpdateType.Chat){var n=new e.Chat(t.getPayloadString());this.updateCallbacks[e.Events.onChatReceived]&&this.updateCallbacks[e.Events.onChatReceived](n)}else if(t.getUpdateType()==e.UpdateType.RoomCreated){var o=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomCreated]&&this.updateCallbacks[e.Events.onRoomCreated](o)}else if(t.getUpdateType()==e.UpdateType.RoomDeleted){var o=new e.Room(0,t.getPayloadString());this.updateCallbacks[e.Events.onRoomDestroyed]&&this.updateCallbacks[e.Events.onRoomDestroyed](o)}else if(t.getUpdateType()==e.UpdateType.UpdatePeers)this.updateCallbacks[e.Events.onUpdatePeersReceived]&&this.updateCallbacks[e.Events.onUpdatePeersReceived](t.getPayload());else if(t.getUpdateType()==e.UpdateType.UserJoinedLobby){var s=new e.Lobby(0,t.getPayloadString()),i=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedLobby]&&this.updateCallbacks[e.Events.onUserJoinedLobby](s,i)}else if(t.getUpdateType()==e.UpdateType.UserLeftLobby){var s=new e.Lobby(0,t.getPayloadString()),i=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftLobby]&&this.updateCallbacks[e.Events.onUserLeftLobby](s,i)}else if(t.getUpdateType()==e.UpdateType.UserJoinedRoom){var o=new e.Room(0,t.getPayloadString()),i=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserJoinedRoom]&&this.updateCallbacks[e.Events.onUserJoinedRoom](o,i)}else if(t.getUpdateType()==e.UpdateType.UserLeftRoom){var o=new e.Room(0,t.getPayloadString()),i=JSON.parse(t.getPayloadString()).user;this.updateCallbacks[e.Events.onUserLeftRoom]&&this.updateCallbacks[e.Events.onUserLeftRoom](o,i)}else if(t.getUpdateType()==e.UpdateType.PrivateChat){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onPrivateChatReceived]&&this.updateCallbacks[e.Events.onPrivateChatReceived](r.sender,r.chat)}else if(t.getUpdateType()==e.UpdateType.RoomPropertyChange){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserChangeRoomProperty]&&this.updateCallbacks[e.Events.onUserChangeRoomProperty](r.sender,r.properties,r.lockProperties);
}else if(t.getUpdateType()==e.UpdateType.MoveCompleted){var a=new e.Move(t.getPayloadString());this.updateCallbacks[e.Events.onMoveCompleted]&&this.updateCallbacks[e.Events.onMoveCompleted](a)}else if(t.getUpdateType()==e.UpdateType.GameStarted){if(this.updateCallbacks[e.Events.onGameStarted]){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStarted](r.sender,r.id,r.nextTurn)}}else if(t.getUpdateType()==e.UpdateType.GameStopped){if(this.updateCallbacks[e.Events.onGameStopped]){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onGameStopped](r.sender,r.id)}}else if(t.getUpdateType()==e.UpdateType.UserResumed){if(this.updateCallbacks[e.Events.onUserResumed]){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserResumed](r.id,r.isLobby,r.user)}}else if(t.getUpdateType()==e.UpdateType.UserPaused){if(this.updateCallbacks[e.Events.onUserPaused]){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onUserPaused](r.id,r.isLobby,r.user)}}else if(t.getUpdateType()==e.UpdateType.NextTurnRequested){if(this.updateCallbacks[e.Events.onNextTurnRequested]){var r=JSON.parse(t.getPayloadString());this.updateCallbacks[e.Events.onNextTurnRequested](r.lastTurn)}}else if(t.getUpdateType()==e.UpdateType.PrivateUpdate&&this.updateCallbacks[e.Events.onPrivateUpdateReceived]){for(var u=t.getPayloadSize(),p=t.getPayload(),l=p[0],c=new Uint8Array(l),d=u-l-1,R=new Uint8Array(d),h=0;l>h;++h)c[h]=p[1+h];for(var v=0;d>v;++v)R[v]=p[1+l+v];this.updateCallbacks[e.Events.onPrivateUpdateReceived](e.Utility.bin2String(c),R)}return 8+t.getPayloadSize()},t.prototype.joinZone=function(n){var o=e.RequestBuilder.buildAuthRequest(t.recoveryAllowance,t.apiKey,t.secretKey,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Auth,o,!0);this.sendMessage(s.buffer)},t.prototype.setResponseListener=function(e,t){this.responseCallbacks[e]=t},t.prototype.resetResponseListener=function(e){this.responseCallbacks[e]&&delete this.responseCallbacks[e]},t.prototype.setNotifyListener=function(e,t){this.updateCallbacks[e]=t},t.prototype.resetNotifyListener=function(e){this.updateCallbacks[e]&&delete this.updateCallbacks[e]},t.prototype._connect=function(n){this.countPendingKeepAlives=0,1==this.useSSL?this.socket=new WebSocket("wss://"+t.serverAddress+":12347"):this.socket=new WebSocket("ws://"+t.serverAddress+":12346"),this.socket.binaryType="arraybuffer";var o=this;this.socket.onopen=function(){n?o.joinZone(n):(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0))},this.socket.onclose=function(){o.connectionState==e.ConnectionState.Connected?(o.connectionState=e.ConnectionState.Disconnected,t.recoveryAllowance>0&&0!=o.SessionID?1==o.autoRecover?(o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AutoRecovering,0),o.recoverConnection()):o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionErrorRecoverable,0):(o.SessionID=0,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))):o.connectionState==e.ConnectionState.Recovering?1==o.autoRecover?(o.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AutoRecovering,0),o.recoverConnection()):o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionErrorRecoverable,0):o.connectionState==e.ConnectionState.Connecting&&(o.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},this.socket.onmessage=function(e){o.onMessage(e)}},t.prototype.setGeoLocation=function(e){t.geoLocation=e,t.serverAddress=""},t.prototype.connect=function(n){if(this.connectionState!=e.ConnectionState.Disconnected)this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0);else if(this.userName=n,this.connectionState=e.ConnectionState.Connecting,""==t.serverAddress){var o=new XMLHttpRequest,s=this;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var i=JSON.parse(o.responseText);i.address?(t.serverAddress=i.address,s._connect(n)):(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey))}else 4==o.readyState&&404==o.status?(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey)):4==o.readyState&&0==o.status&&(this.connectionState=e.ConnectionState.Disconnected,s.responseCallbacks[e.Events.onConnectDone]&&s.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},""!=t.geoLocation?o.open("GET",this.getControlLookup()+"?api="+t.apiKey+"&geo="+t.geoLocation,!0):o.open("GET",this.getControlLookup()+"?api="+t.apiKey,!0),o.send()}else this._connect(n)},t.prototype.disconnect=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onDisconnectDone]&&this.responseCallbacks[e.Events.onDisconnectDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Signout,"",!0);this.sendMessage(t.buffer),this.SessionID=0,this.connectionState=e.ConnectionState.Disconnecting;var n=this;this.socket.onclose=function(){n.connectionState=e.ConnectionState.Disconnected,n.responseCallbacks[e.Events.onDisconnectDone]&&n.responseCallbacks[e.Events.onDisconnectDone](e.ResultCode.Success)},this.socket.close()},t.prototype.joinLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinLobbyDone]&&this.responseCallbacks[e.Events.onJoinLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.subscribeLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSubscribeLobbyDone]&&this.responseCallbacks[e.Events.onSubscribeLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.unsubscribeLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUnsubscribeLobbyDone]&&this.responseCallbacks[e.Events.onUnsubscribeLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.JoinAndSubcribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone]&&this.responseCallbacks[e.Events.onJoinAndSubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinAndSubcribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.LeaveAndUnsucribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onLeaveAndUnsubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveAndUnsucribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveLobby=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.Lobby(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveLobbyDone]&&this.responseCallbacks[e.Events.onLeaveLobbyDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveLobby,n,!0);this.sendMessage(o.buffer)},t.prototype.joinRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.joinRoomInRange=function(t,n,o){if(this.connectionState!=e.ConnectionState.Connected){var s=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](s))}var i=e.RequestBuilder.buildRoomInRangeRequest(t,n,o),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomInRange,i,!0);this.sendMessage(r.buffer)},t.prototype.joinRoomWithProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onJoinRoomDone]&&this.responseCallbacks[e.Events.onJoinRoomDone](n))}var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.JoinRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.subscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSubscribeRoomDone]&&this.responseCallbacks[e.Events.onSubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.unsubscribeRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUnsubscribeRoomDone]&&this.responseCallbacks[e.Events.onUnsubscribeRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnsubscribeRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.leaveRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onLeaveRoomDone]&&this.responseCallbacks[e.Events.onLeaveRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LeaveRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.createRoom=function(t,n,o,s){if("undefined"==typeof s&&(s=null),this.connectionState!=e.ConnectionState.Connected){var i=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](i))}var r={};if(r.name=t,r.owner=n,r.maxUsers=o,null!=s){if(JSON.stringify(s).length>e.Constants.MaxPropertySizeBytes){if(this.responseCallbacks[e.Events.onCreateRoomDone]){var i=new e.Room(e.ResultCode.ResultSizeError,"");this.responseCallbacks[e.Events.onCreateRoomDone](i)}return}r.properties=s}var a=JSON.stringify(r),u=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,a,!0);this.sendMessage(u.buffer)},t.prototype.deleteRoom=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onDeleteRoomDone]&&this.responseCallbacks[e.Events.onDeleteRoomDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.DeleteRoom,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveRoomInfo=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveRoomInfoDone]&&this.responseCallbacks[e.Events.onGetLiveRoomInfoDone](n))}var o=e.RequestBuilder.buildRoomRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.getLiveLobbyInfo=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone]&&this.responseCallbacks[e.Events.onGetLiveLobbyInfoDone](t))}var n=e.RequestBuilder.buildLobbyRequest(),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetLobbyInfo,n,!0);this.sendMessage(o.buffer)},t.prototype.getLiveUserInfo=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetLiveUserInfoDone]&&this.responseCallbacks[e.Events.onGetLiveUserInfoDone](n))}var o=e.RequestBuilder.buildUserRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUserInfo,o,!0);this.sendMessage(s.buffer)},t.prototype.getUserStatus=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUserStatusDone]&&this.responseCallbacks[e.Events.onUserStatusDone](n))}var o=e.RequestBuilder.buildUserRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUserStatus,o,!0);this.sendMessage(s.buffer)},t.prototype.setCustomUserData=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.LiveUser(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSetCustomUserDataDone]&&this.responseCallbacks[e.Events.onSetCustomUserDataDone](o))}var s=e.RequestBuilder.buildSetCustomUserDataRequest(t,n),i=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomUserData,s,!0);this.sendMessage(i.buffer)},t.prototype.setCustomRoomData=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onSetCustomRoomDataDone]&&this.responseCallbacks[e.Events.onSetCustomRoomDataDone](o))}var s=e.RequestBuilder.buildSetCustomRoomDataRequest(t,n),i=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetCustomRoomData,s,!0);this.sendMessage(i.buffer)},t.prototype.getOnlineUsers=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.AllUsersEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetOnlineUsersDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersDone](t))}var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetUsers,"",!0);this.sendMessage(n.buffer)},t.prototype.getAllRooms=function(){if(this.connectionState!=e.ConnectionState.Connected){var t=new e.AllRoomsEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetAllRoomsDone]&&this.responseCallbacks[e.Events.onGetAllRoomsDone](t))}var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRooms,"",!0);this.sendMessage(n.buffer)},t.prototype.getRoomsInRange=function(t,n){if(this.connectionState!=e.ConnectionState.Connected){var o=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](o))}var s=e.RequestBuilder.buildRoomInRangeRequest(t,n,!0),i=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInRange,s,!0);this.sendMessage(i.buffer)},t.prototype.getRoomsWithProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected){var n=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](n))}var o=e.RequestBuilder.buildRoomWithPropertiesRequest(t),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomWithProperties,o,!0);this.sendMessage(s.buffer)},t.prototype.GetRoomInRangeWithProp=function(t,n,o){if(this.connectionState!=e.ConnectionState.Connected){var s=new e.MatchedRoomEvent(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onGetMatchedRoomsDone]&&this.responseCallbacks[e.Events.onGetMatchedRoomsDone](s))}var i=e.RequestBuilder.buildRoomInRangeWithPropRequest(t,n,!0,o),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetRoomInRangeWithProp,i,!0);this.sendMessage(r.buffer)},t.prototype.sendChat=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildChatRequest(t);if(""==n)this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest);else{var o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Chat,n,!0);this.sendMessage(o.buffer)}},t.prototype.sendUpdatePeers=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](e.ResultCode.BadRequest));if(t.length>=512)this.responseCallbacks[e.Events.onSendUpdateDone]&&this.responseCallbacks[e.Events.onSendUpdateDone](e.ResultCode.BadRequest);else{var n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdatePeers,t,!1);this.sendMessage(n.buffer)}},t.prototype.sendPrivateUpdatePeers=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](e.ResultCode.BadRequest));if(n.length>=512)this.responseCallbacks[e.Events.onSendPrivateUpdateDone]&&this.responseCallbacks[e.Events.onSendPrivateUpdateDone](e.ResultCode.BadRequest);else{var o=e.RequestBuilder.buildPrivateUpdateRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.PrivateUpdate,o,!1);this.sendMessage(s.buffer)}},t.prototype.sendPrivateChat=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildPrivateChatRequest(t,n);if(""==o)this.responseCallbacks[e.Events.onSendPrivateChatDone]&&this.responseCallbacks[e.Events.onSendPrivateChatDone](e.ResultCode.BadRequest);else{var s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.PrivateChat,o,!0);this.sendMessage(s.buffer)}},t.prototype.updateRoomProperties=function(t,n,o){if("undefined"==typeof o&&(o=null),this.connectionState!=e.ConnectionState.Connected){var s=new e.LiveRoom(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onUpdatePropertyDone]&&this.responseCallbacks[e.Events.onUpdatePropertyDone](s))}var i=e.RequestBuilder.buildUpdateRoomPropertiesRequest(t,n,o),r=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UpdateRoomProperty,i,!0);this.sendMessage(r.buffer)},t.prototype.lockProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onLockPropertiesDone]&&this.responseCallbacks[e.Events.onLockPropertiesDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildLockPropertiesRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.LockProperties,n,!0);this.sendMessage(o.buffer)},t.prototype.unlockProperties=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onUnlockPropertiesDone]&&this.responseCallbacks[e.Events.onUnlockPropertiesDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildUnlockPropertiesRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.UnlockProperties,n,!0);this.sendMessage(o.buffer)},t.prototype.createTurnRoom=function(t,n,o,s,i){if(this.connectionState!=e.ConnectionState.Connected){var r=new e.Room(e.ResultCode.BadRequest);return void(this.responseCallbacks[e.Events.onCreateRoomDone]&&this.responseCallbacks[e.Events.onCreateRoomDone](r))}var a=e.RequestBuilder.buildCreateTurnRoomRequest(t,n,o,s,i),u=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.CreateRoom,a,!0);this.sendMessage(u.buffer)},t.prototype.sendMove=function(t,n){if("undefined"==typeof n&&(n=""),this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendMoveDone]&&this.responseCallbacks[e.Events.onSendMoveDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildSendMoveRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.Move,o,!0);this.sendMessage(s.buffer)},t.prototype.startGame=function(t,n){if("undefined"==typeof t&&(t=!0),"undefined"==typeof n&&(n=""),this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onStartGameDone]&&this.responseCallbacks[e.Events.onStartGameDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildStartGameRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StartGame,o,!0);this.sendMessage(s.buffer)},t.prototype.stopGame=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onStopGameDone]&&this.responseCallbacks[e.Events.onStopGameDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.StopGame,"",!0);this.sendMessage(t.buffer)},t.prototype.getMoveHistory=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetMoveHistoryDone]&&this.responseCallbacks[e.Events.onGetMoveHistoryDone](e.ResultCode.BadRequest,[]));var t=e.RequestBuilder.buildGetMoveHistoryRequest(),n=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetMoveHistory,t,!0);this.sendMessage(n.buffer)},t.prototype.setNextTurn=function(t){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSetNextTurnDone]&&this.responseCallbacks[e.Events.onSetNextTurnDone](e.ResultCode.BadRequest));var n=e.RequestBuilder.buildSetNextTurnRequest(t),o=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.SetNextTurn,n,!0);this.sendMessage(o.buffer)},t.prototype.setRecoveryAllowance=function(e){t.recoveryAllowance=e},t.prototype.recoverConnection=function(){if(0==this.SessionID||this.connectionState!=e.ConnectionState.Disconnected)this.responseCallbacks[e.Events.onConnectDone]&&this.responseCallbacks[e.Events.onConnectDone](e.ResultCode.BadRequest,0);else if(this.connectionState=e.ConnectionState.Recovering,""==t.serverAddress){var n=new XMLHttpRequest,o=this;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var s=JSON.parse(n.responseText);s.address?(t.serverAddress=s.address,o._connect(o.userName)):(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey))}else 4==n.readyState&&404==n.status?(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.AuthError,e.ReasonCode.InvalidAPIKey)):4==n.readyState&&0==n.status&&(this.connectionState=e.ConnectionState.Disconnected,o.responseCallbacks[e.Events.onConnectDone]&&o.responseCallbacks[e.Events.onConnectDone](e.ResultCode.ConnectionError,0))},""!=t.geoLocation?n.open("GET",this.getControlLookup()+"?api="+t.apiKey+"&geo="+t.geoLocation,!0):n.open("GET",this.getControlLookup()+"?api="+t.apiKey,!0),n.send()}else this._connect(this.userName)},t.prototype.getSessionID=function(){return this.SessionID},t.prototype.recoverConnectionWithSessionID=function(e,t){this.SessionID=e,this.userName=t,this.recoverConnection()},t.prototype.enableTrace=function(e){this.enableLogs=e},t.prototype.getConnectionState=function(){return this.connectionState},t.prototype.enableSSL=function(e){this.useSSL=e},t.prototype.getControlLookup=function(){return 1==this.useSSL?"https://"+this.LOOKUP_ADDRESS_DNS:"http://"+this.LOOKUP_ADDRESS},t.prototype.getOnlineUsersCount=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetOnlineUsersCountDone]&&this.responseCallbacks[e.Events.onGetOnlineUsersCountDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetOnlineUsersCount,"",!0);this.sendMessage(t.buffer)},t.prototype.getAllRoomsCount=function(){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onGetAllRoomsCountDone]&&this.responseCallbacks[e.Events.onGetAllRoomsCountDone](e.ResultCode.BadRequest));var t=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.GetAllRoomsCount,"",!0);this.sendMessage(t.buffer)},t.prototype.broadcastChat=function(t,n){if(this.connectionState!=e.ConnectionState.Connected)return void(this.responseCallbacks[e.Events.onSendChatDone]&&this.responseCallbacks[e.Events.onSendChatDone](e.ResultCode.BadRequest));var o=e.RequestBuilder.buildBroadcastChatRequest(t,n),s=e.RequestBuilder.buildWarpRequest(this.SessionID,e.RequestType.BroadcastChat,o,!0);this.sendMessage(s.buffer)},t.instance=null,t.apiKey="",t.secretKey="",t.serverAddress="",t.recoveryAllowance=0,t.geoLocation="",t}();e.WarpClient=t}(AppWarp||(AppWarp={}));var AppWarp;!function(e){var t=t||function(e,t){var n={},o=n.lib={},s=function(){},i=o.Base={extend:function(e){s.prototype=this;var t=new s;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var s=0;e>s;s++)t[o+s>>>2]|=(n[s>>>2]>>>24-8*(s%4)&255)<<24-8*((o+s)%4);else if(65535<n.length)for(s=0;e>s;s+=4)t[o+s>>>2]=n[s>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;t>o;o+=4)n.push(4294967296*e.random()|0);return new r.init(n,t)}}),a=n.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++){var s=t[o>>>2]>>>24-8*(o%4)&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return new r.init(n,t/2)}},p=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;e>o;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;t>o;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return new r.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,s=n.sigBytes,i=this.blockSize,a=s/(4*i),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*i,s=e.min(4*t,s),t){for(var u=0;t>u;u+=i)this._doProcessBlock(o,u);u=o.splice(0,t),n.sigBytes-=s}return new r.init(u,s)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=t,n=e.lib,o=n.WordArray,s=n.Hasher,i=[],n=e.algo.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],s=n[1],r=n[2],a=n[3],u=n[4],p=0;80>p;p++){if(16>p)i[p]=0|e[t+p];else{var l=i[p-3]^i[p-8]^i[p-14]^i[p-16];i[p]=l<<1|l>>>31}l=(o<<5|o>>>27)+u+i[p],l=20>p?l+((s&r|~s&a)+1518500249):40>p?l+((s^r^a)+1859775393):60>p?l+((s&r|s&a|r&a)-1894007588):l+((s^r^a)-899497514),u=a,a=r,r=s<<30|s>>>2,s=o,o=l}n[0]=n[0]+o|0,n[1]=n[1]+s|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(o+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(n),e.HmacSHA1=s._createHmacHelper(n)}(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,s=4*o;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),r=this._iKey=t.clone(),a=i.words,u=r.words,p=0;o>p;p++)a[p]^=1549556828,u[p]^=909522486;i.sigBytes=r.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),e.CryptoJS=t}(AppWarp||(AppWarp={}));